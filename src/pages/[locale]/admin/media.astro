---
import AdminLayout from "../../../layouts/AdminLayout.astro";
import { t, locales, defaultLocale } from "../../../i18n/index.ts";
import { db } from "../../../db/index.ts";
import { getMenuItems } from "../../../lib/menu.ts";
import { ensureTranslationsLoaded } from "../../../lib/i18n-helpers.ts";

const locale = Astro.params.locale ?? defaultLocale;
if (!locales.includes(locale as "en" | "es" | "pt-br")) {
  return Astro.redirect(`/${defaultLocale}/admin`);
}

// Pré-carregar traduções
await ensureTranslationsLoaded(locale);

const user = Astro.locals.user;
if (!user) {
  return Astro.redirect("/login");
}

const menuItems = await getMenuItems(db);
---

<AdminLayout title={t(locale, "admin.menu.media")} locale={locale} menuItems={menuItems} user={user}>
  <div class="p-6">
    <p class="text-base-content/70">Media library — coming soon.</p>
  </div>
</AdminLayout>
